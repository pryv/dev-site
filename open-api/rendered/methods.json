{
  "id": "methods",
  "title": "API methods",
  "sections": [
    {
      "id": "auth",
      "title": "Authentication",
      "trustedOnly": true,
      "description": "Methods for trusted apps to login/logout users.",
      "sections": [
        {
          "id": "auth.login",
          "type": "method",
          "title": "Login user",
          "http": "POST /auth/login",
          "description": "Authenticates the user against the provided credentials, opening a personal access session. This is one of the only API methods that do not expect an [auth parameter](#basics-authentication).   \nThis method requires that the `appId` and `Origin` (or `Referer`) header comply with the [trusted app verification](#basics-trusted-apps-verification).",
          "params": {
            "properties": [
              {
                "key": "username",
                "type": "string",
                "description": "The user's username."
              },
              {
                "key": "password",
                "type": "string",
                "description": "The user's password."
              },
              {
                "key": "appId",
                "type": "string",
                "description": "Your app's unique identifier."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "token",
                "type": "string",
                "description": "The personal access token to use for further API calls."
              },
              {
                "key": "preferredLanguage",
                "type": "string",
                "description": "The user's preferred language as a 2-letter ISO language code."
              }
            ]
          },
          "examples": [
            {
              "params": {
                "username": "chuangzi",
                "password": "B|_|tt3rfly!",
                "appId": "my-app-id"
              },
              "result": {
                "token": "ck862wm1i0002chpv72z24zm3",
                "preferredLanguage": "zh"
              }
            }
          ]
        },
        {
          "id": "auth.logout",
          "type": "method",
          "title": "Logout user",
          "http": "POST /auth/logout",
          "description": "Terminates a personal access session by invalidating its access token (the user will have to login again).",
          "result": {
            "http": "200 OK"
          },
          "examples": []
        }
      ]
    },
    {
      "id": "mfa",
      "title": "Multi-factor authentication",
      "trustedOnly": true,
      "description": "Methods for handling multi-factor authentication (MFA) on top of the usual [Login method](#methods-auth-auth-login).",
      "sections": [
        {
          "id": "mfa.login",
          "type": "method",
          "title": "Login with MFA",
          "http": "POST /auth/login",
          "description": "Proxied [Login](#methods-auth-auth-login) call that initiates MFA authentication,\nwhen MFA is activated for the current user.",
          "params": {
            "description": "Similar to the usual [Login](#methods-auth-auth-login) parameters."
          },
          "result": {
            "http": "302 Found",
            "properties": [
              {
                "key": "mfaToken",
                "type": "string",
                "description": "An expiring MFA session token to be used all along the MFA flow (challenge, verification)."
              }
            ]
          },
          "examples": [
            {
              "title": "Login when MFA is activated.",
              "params": {
                "username": "chuangzi",
                "password": "B|_|tt3rfly!",
                "appId": "my-app-id"
              },
              "result": {
                "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
              }
            }
          ]
        },
        {
          "id": "mfa.activate",
          "type": "method",
          "title": "Activate MFA",
          "http": "POST /mfa/activate",
          "description": "Initiates the MFA activation flow for a given Pryv.io user, triggering the MFA challenge.\n\nRequires a personal token as [authentication](#basics-authentication), which should be obtained during a prior [Login call](#methods-auth-auth-login).",
          "params": {
            "description": "The parameters depend entirely on the chosen MFA method and will be forwarded to the service generating the challenge."
          },
          "result": {
            "http": "302 Found",
            "properties": [
              {
                "key": "mfaToken",
                "type": "string",
                "description": "An expiring MFA session token to be used all along the MFA flow (challenge, verification)."
              }
            ]
          },
          "examples": [
            {
              "title": "Initiating the MFA activation using a phone number.",
              "params": {
                "phone_number": "41791234567"
              },
              "result": {
                "mfaToken": "215bcc40-1296-11ea-9ff7-453ff2437834"
              }
            }
          ]
        },
        {
          "id": "mfa.confirm",
          "type": "method",
          "title": "Confirm MFA activation",
          "http": "POST /mfa/confirm",
          "description": "Confirms the MFA activation by verifying the MFA challenge triggered by a prior [MFA activation call](#methods-mfa-mfa-activate).\n\nRequires a MFA session token as [authentication](#basics-authentication).",
          "params": {
            "description": "The parameters depend entirely on the chosen MFA method and will be forwarded to the service verifying the challenge."
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "recoveryCodes",
                "type": "array of strings",
                "description": "An array of recovery codes that can be used for the [MFA recover method](#methods-mfa-mfa-recover)."
              }
            ]
          },
          "errors": [
            {
              "key": "forbidden",
              "http": "403",
              "description": "Invalid MFA session token."
            }
          ],
          "examples": [
            {
              "title": "Finalizing the MFA activation.",
              "params": {
                "code": "1234"
              },
              "result": {
                "recoveryCodes": [
                  "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
                  "eb81be18-3168-4a44-8914-d97187df991c",
                  "f7d7e863-0589-4779-8ddd-6c7e33df66af",
                  "fb1d579f-2b92-42e3-82fa-8d7154c334f6",
                  "52d3f019-3712-41d3-8c13-4924c3a7a703",
                  "ac9de48c-a47d-46db-b276-e045ba693672",
                  "de1072aa-6ed9-46a7-962c-1f8bb88ece2e",
                  "cb5277cf-af86-47c3-a03e-7cc5011314ac",
                  "16055dff-bc09-4262-b276-d70df82a9a2b",
                  "36c7dd9b-5d23-4fb9-8504-c3e04aeb62c0"
                ]
              }
            }
          ]
        },
        {
          "id": "mfa.challenge",
          "type": "method",
          "title": "Trigger MFA challenge",
          "http": "POST /mfa/challenge",
          "description": "Triggers the MFA challenge, depending on the chosen MFA method (e.g. send a verification code by SMS).\n\nRequires a MFA session token as [authentication](#basics-authentication).",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "message",
                "type": "string",
                "description": "\"Please verify the MFA challenge.\""
              }
            ]
          },
          "errors": [
            {
              "key": "forbidden",
              "http": "403",
              "description": "Invalid MFA session token."
            }
          ]
        },
        {
          "id": "mfa.verify",
          "type": "method",
          "title": "Verify MFA challenge",
          "http": "POST /mfa/verify",
          "description": "Verifies the MFA challenge triggered by a prior [MFA challenge call](#methods-mfa-mfa-challenge).\n\nRequires a MFA session token as [authentication](#basics-authentication).",
          "params": {
            "description": "The parameters depend entirely on the chosen MFA method and will be forwarded to the service verifying the challenge."
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "token",
                "type": "string",
                "description": "The personal access token to use for further API calls."
              }
            ]
          },
          "errors": [
            {
              "key": "forbidden",
              "http": "403",
              "description": "Invalid MFA session token."
            }
          ],
          "examples": [
            {
              "title": "Verifying the MFA challenge.",
              "params": {
                "code": "1234"
              },
              "result": {
                "token": "ck862wm1i0002chpv72z24zm3"
              }
            }
          ]
        },
        {
          "id": "mfa.deactivate",
          "type": "method",
          "title": "Deactivate MFA",
          "http": "POST /mfa/deactivate",
          "description": "Deactivate MFA for a given Pryv.io user.\n\nRequires a personal token as [authentication](#basics-authentication).",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "message",
                "type": "string",
                "description": "\"MFA deactivated.\""
              }
            ]
          }
        },
        {
          "id": "mfa.recover",
          "type": "method",
          "title": "Recover MFA",
          "http": "POST /mfa/recover",
          "description": "Deactivate MFA for a given Pryv.io user using a MFA recovery code.\n\nThis is useful when [Deactivate MFA](#methods-mfa-mfa-deactivate) can not be used (in case of 2nd factor loss).\nInstead, requires a MFA recovery code (obtained when [confirming the MFA activation](#methods-mfa-mfa-confirm)), as well as the usual [Login](#methods-auth-auth-login) parameters.",
          "params": {
            "description": "Similar to the usual [Login](#methods-auth-auth-login) parameters, as well as:",
            "properties": [
              {
                "key": "recoveryCode",
                "type": "string",
                "description": "One MFA recovery code."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "message",
                "type": "string",
                "description": "\"MFA deactivated.\""
              }
            ]
          },
          "errors": [
            {
              "key": "missing-parameter",
              "http": "400",
              "description": "Missing parameter: recoveryCode."
            },
            {
              "key": "invalid-parameter",
              "http": "400",
              "description": "Invalid recovery code."
            }
          ],
          "examples": [
            {
              "title": "Deactivate MFA using a recovery code.",
              "params": {
                "recoveryCode": "fba6e1f6-9f8f-4a0a-9c4f-8cf3458b4c55",
                "username": "chuangzi",
                "password": "B|_|tt3rfly!",
                "appId": "my-app-id"
              },
              "result": {
                "message": "MFA deactivated."
              }
            }
          ]
        }
      ]
    },
    {
      "id": "events",
      "title": "Events",
      "description": "Methods to retrieve and manipulate [events](#data-structure-event).",
      "sections": [
        {
          "id": "events.get",
          "type": "method",
          "title": "Get events",
          "http": "GET /events",
          "description": "Queries accessible events.",
          "params": {
            "properties": [
              {
                "key": "fromTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "The start time of the timeframe you want to retrieve events for. Default is 24 hours before `toTime` if the latter is set; otherwise it is not taken into account."
              },
              {
                "key": "toTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "The end time of the timeframe you want to retrieve events for. Default is the current time. Note: events are considered to be within a given timeframe based on their `time` only (`duration` is not considered)."
              },
              {
                "key": "streams",
                "type": "array of [identifier](#data-structure-identifier)",
                "optional": true,
                "description": "If set, only events assigned to the specified streams and their sub-streams will be returned. By default, all accessible events are returned regardless of their stream."
              },
              {
                "key": "tags",
                "type": "array of strings",
                "optional": true,
                "description": "If set, only events assigned to any of the listed tags will be returned."
              },
              {
                "key": "types",
                "type": "array of strings",
                "optional": true,
                "description": "If set, only events of any of the listed types will be returned."
              },
              {
                "key": "running",
                "type": "boolean",
                "optional": true,
                "description": "If `true`, only running period events will be returned."
              },
              {
                "key": "sortAscending",
                "type": "`true`|`false`",
                "optional": true,
                "description": "If `true`, events will be sorted from oldest to newest. Default: false (sort descending)."
              },
              {
                "key": "skip",
                "type": "number",
                "optional": true,
                "description": "The number of items to skip in the results."
              },
              {
                "key": "limit",
                "type": "number",
                "optional": true,
                "description": "The number of items to return in the results. A default value of 20 items is used if no other range limiting parameter is specified (`fromTime`, `toTime`)."
              },
              {
                "key": "state",
                "type": "`default`|`trashed`|`all`",
                "optional": true,
                "description": "Indicates what items to return depending on their state. By default, only items that are not in the trash are returned; `trashed` returns only items in the trash, while `all` return all items regardless of their state."
              },
              {
                "key": "modifiedSince",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "If specified, only events modified since that time will be returned."
              },
              {
                "key": "includeDeletions",
                "type": "boolean",
                "optional": true,
                "description": "Whether to include event deletions since `modifiedSince` for sync purposes (only applies when `modifiedSince` is set). Defaults to `false`."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "events",
                "type": "array of [events](#data-structure-event)",
                "description": "The accessible events ordered by time (see `sortAscending` above)."
              },
              {
                "key": "eventDeletions",
                "type": "array of [item deletions](#data-structure-item-deletion)",
                "optional": true,
                "description": "If requested by `includeDeletions`, the event deletions since `modifiedSince`, ordered by deletion time."
              }
            ]
          },
          "examples": [
            {
              "title": "Fetching the last 20 events (default call)",
              "params": {},
              "result": {
                "events": [
                  {
                    "id": "ck862wm210010chpvidnw51su",
                    "time": 1585061618.473,
                    "streamId": "diary",
                    "tags": [],
                    "type": "picture/attached",
                    "content": null,
                    "attachments": [
                      {
                        "id": "ck862wm210011chpv91h1pz5d",
                        "fileName": "photo.jpg",
                        "type": "image/jpeg",
                        "size": 2561,
                        "readToken": "ck862wm210012chpv2p2hx14n-I6V75lUFPNyRPzSFPnmoTqIPany"
                      }
                    ],
                    "created": 1585061618.473,
                    "createdBy": "ck862wm1i0004chpvcorv9zs1",
                    "modified": 1585061618.473,
                    "modifiedBy": "ck862wm1i0004chpvcorv9zs1"
                  },
                  {
                    "id": "ck862wm21000nchpv3208clny",
                    "time": 1585065218.473,
                    "streamId": "jogging",
                    "tags": [],
                    "type": "activity/pryv",
                    "content": null,
                    "created": 1585065218.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585065218.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  },
                  {
                    "id": "ck862wm210013chpvpj6f78m2",
                    "time": 1350373077.359,
                    "streamId": "diary",
                    "tags": [],
                    "type": "position/wgs84",
                    "content": {
                      "latitude": 40.714728,
                      "longitude": -73.998672
                    },
                    "created": 1585058018.473,
                    "createdBy": "ck862wm1h0000chpvf344943e",
                    "modified": 1585058018.473,
                    "modifiedBy": "ck862wm1h0000chpvf344943e"
                  }
                ]
              }
            },
            {
              "title": "cURL for multiple streams",
              "params": "```bash\ncurl -i \"https://${token}@${username}.pryv.me/events?streams[]=diary&streams[]=weight\"\n```",
              "result": {
                "events": [
                  {
                    "id": "ck862wm210010chpvidnw51su",
                    "time": 1585061618.473,
                    "streamId": "diary",
                    "tags": [],
                    "type": "picture/attached",
                    "content": null,
                    "attachments": [
                      {
                        "id": "ck862wm210011chpv91h1pz5d",
                        "fileName": "photo.jpg",
                        "type": "image/jpeg",
                        "size": 2561,
                        "readToken": "ck862wm210012chpv2p2hx14n-I6V75lUFPNyRPzSFPnmoTqIPany"
                      }
                    ],
                    "created": 1585061618.473,
                    "createdBy": "ck862wm1i0004chpvcorv9zs1",
                    "modified": 1585061618.473,
                    "modifiedBy": "ck862wm1i0004chpvcorv9zs1"
                  },
                  {
                    "id": "ck862wm21000wchpvcqaj50xl",
                    "time": 1585061618.473,
                    "streamId": "diary",
                    "tags": [],
                    "type": "note/text",
                    "content": "道可道非常道。。。",
                    "created": 1585061618.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585101218.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  },
                  {
                    "id": "ck862wm210013chpvpj6f78m2",
                    "time": 1350373077.359,
                    "streamId": "diary",
                    "tags": [],
                    "type": "position/wgs84",
                    "content": {
                      "latitude": 40.714728,
                      "longitude": -73.998672
                    },
                    "created": 1585058018.473,
                    "createdBy": "ck862wm1h0000chpvf344943e",
                    "modified": 1585058018.473,
                    "modifiedBy": "ck862wm1h0000chpvf344943e"
                  },
                  {
                    "id": "ck862wm21000vchpv87b2ihg0",
                    "time": 1585065218.473,
                    "streamId": "weight",
                    "tags": [],
                    "type": "mass/kg",
                    "content": 90,
                    "created": 1585065218.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585065218.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  }
                ]
              }
            },
            {
              "title": "cURL with deletions",
              "params": "```bash\ncurl -i \"https://${token}@${username}.pryv.me/events?includeDeletions=true&modifiedSince=1584978818.49\"\"\n```",
              "result": {
                "events": [
                  {
                    "id": "ck862wm21000vchpv87b2ihg0",
                    "time": 1585065218.473,
                    "streamId": "weight",
                    "tags": [],
                    "type": "mass/kg",
                    "content": 90,
                    "created": 1585065218.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585065218.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  },
                  {
                    "id": "ck862wm22001bchpvlctqalko",
                    "deleted": 1585061618.474
                  },
                  {
                    "id": "ck862wm22001cchpvooksezfc",
                    "deleted": 1585029218.474
                  },
                  {
                    "id": "ck862wm22001dchpv3qea39c5",
                    "deleted": 1584993218.474
                  }
                ]
              }
            }
          ]
        },
        {
          "id": "events.getOne",
          "type": "method",
          "title": "Get one event",
          "http": "GET /events/{id}",
          "description": "Fetches a specific event. This request is mostly used to fetch an event's version history, allowing to review all the modifications to an event's data.",
          "params": {
            "properties": [
              {
                "key": "includeHistory",
                "type": "boolean",
                "optional": true,
                "description": "If `true`, the event's history will be added to the response. Default: false (don't include the history)."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The event."
              },
              {
                "key": "history",
                "type": "array of [events](#data-structure-event)",
                "optional": true,
                "description": "If requested by `includeHistory`, the history of the event as an array of events, ordered by modification time."
              }
            ]
          },
          "examples": [
            {
              "title": "Fetching an event's version history",
              "params": {
                "includeHistory": true
              },
              "result": {
                "event": {
                  "id": "ck862wm21000xchpvtj4nnm9f",
                  "time": 1585061618.473,
                  "streamId": "diary",
                  "tags": [],
                  "type": "note/text",
                  "content": "Hi, I am the latest version of this event",
                  "created": 1585061618.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585072418.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                },
                "history": [
                  {
                    "id": "ck862wm21000ychpv47g2efs6",
                    "time": 1585061618.473,
                    "streamId": "diary",
                    "tags": [],
                    "type": "note/text",
                    "content": "Hi, I am the first modification",
                    "created": 1585061618.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585068818.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  },
                  {
                    "id": "ck862wm21000zchpvt3ed3jg3",
                    "time": 1585061618.473,
                    "streamId": "diary",
                    "tags": [],
                    "type": "note/text",
                    "content": "Hi, I was the initial event",
                    "created": 1585061618.473,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585065218.473,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  }
                ]
              }
            }
          ]
        },
        {
          "id": "events.create",
          "type": "method",
          "title": "Create event",
          "http": "POST /events",
          "description": "Records a new event, in addition to JSON, this request accepts standard multipart/form-data content to support the creation of event with attached files in a single request. When sending a multipart request, one content part must hold the JSON for the new event and all other content parts must be the attached files.",
          "params": {
            "description": "The new event's data: see [Event](#data-structure-event)."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The created event."
              },
              {
                "key": "stoppedId",
                "type": "[identifier](#data-structure-identifier)",
                "description": "(**DEPRECATED**)  \nOnly in `singleActivity` streams. If set, indicates the id of the previously running period event that was stopped as a consequence of inserting the new event."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The referenced stream is in the trash, and we prevent the recording of new events into trashed streams."
            },
            {
              "key": "periods-overlap",
              "http": "400",
              "description": "(**DEPRECATED**)  \nOnly in `singleActivity` streams: the new event overlaps existing period events. The overlapped events' ids are listed as an array in the error's `data.overlappedIds`."
            }
          ],
          "examples": [
            {
              "title": "Capturing a simple number value",
              "params": {
                "streamId": "weight",
                "type": "mass/kg",
                "content": 90
              },
              "result": {
                "event": {
                  "id": "ck862wm21000vchpv87b2ihg0",
                  "time": 1585065218.473,
                  "streamId": "weight",
                  "tags": [],
                  "type": "mass/kg",
                  "content": 90,
                  "created": 1585065218.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            },
            {
              "title": "cURL with attachment",
              "content": "```bash\ncurl -i -F 'event={\"streamId\":\"diary\",\"type\":\"picture/attached\"}'  -F \"file=@photo.jpg\" \"https://${token}@${username}.pryv.me/events\"\n```",
              "result": {
                "event": {
                  "id": "ck862wm210010chpvidnw51su",
                  "time": 1585061618.473,
                  "streamId": "diary",
                  "tags": [],
                  "type": "picture/attached",
                  "content": null,
                  "attachments": [
                    {
                      "id": "ck862wm210011chpv91h1pz5d",
                      "fileName": "photo.jpg",
                      "type": "image/jpeg",
                      "size": 2561,
                      "readToken": "ck862wm210012chpv2p2hx14n-I6V75lUFPNyRPzSFPnmoTqIPany"
                    }
                  ],
                  "created": 1585061618.473,
                  "createdBy": "ck862wm1i0004chpvcorv9zs1",
                  "modified": 1585061618.473,
                  "modifiedBy": "ck862wm1i0004chpvcorv9zs1"
                }
              }
            }
          ]
        },
        {
          "id": "events.start",
          "type": "method",
          "title": "Start period",
          "http": "POST /events/start",
          "description": "**(DEPRECATED)**    \nStarts a new period event. This is equivalent to starting an event with a null `duration`. In `singleActivity` streams, also stops the previously running period event if any.\n\nSee [Create event](#methods-events-events-create) for details.",
          "examples": [
            {
              "title": "Starting an activity",
              "params": {
                "streamId": "bicycling",
                "type": "activity/pryv"
              },
              "resultHTTP": "201 Created",
              "result": {
                "event": {
                  "id": "ck862wm21000ochpv1e92l1ul",
                  "time": 1585065218.473,
                  "duration": null,
                  "streamId": "bicycling",
                  "tags": [],
                  "type": "activity/pryv",
                  "content": null,
                  "created": 1585065218.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "events.stop",
          "type": "method",
          "title": "Stop period",
          "http": "POST /events/stop",
          "description": "**(DEPRECATED)**  \nStops a running period event. In `singleActivity` streams, which guarantee that only one event is running at any given time, that event is automatically determined; for regular streams, the event to stop (or its type) must be specified.",
          "params": {
            "properties": [
              {
                "key": "streamId",
                "type": "[identifier](#data-structure-identifier)",
                "description": "(**DEPRECATED**)  \nThe id of the `singleActivity` stream in which to stop the running event. Either this or `id` must be specified."
              },
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "description": "The id of the event to stop. Either this or `streamId` (and possibly `type`) must be specified."
              },
              {
                "key": "type",
                "type": "string",
                "description": "The type of the event to stop. `streamId` must be specified as well. If there are multiple running events matching, the closest one (by time) will be stopped."
              },
              {
                "key": "time",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "The stop time. Default: now."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "stoppedId",
                "type": "[identifier](#data-structure-identifier)",
                "description": "The id of the event that was stopped or null if no running event was found."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The specified event is not a running period event."
            }
          ],
          "examples": [
            {
              "params": {
                "streamId": "bicycling",
                "time": 1585065218.491
              },
              "result": {
                "stoppedId": "ck862wm21000ochpv1e92l1ul"
              }
            }
          ]
        },
        {
          "id": "events.update",
          "type": "method",
          "title": "Update event",
          "http": "PUT /events/{id}",
          "description": "Modifies the event.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the event."
              },
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "New values for the event's fields: see [event](#data-structure-event). All fields are optional, and only modified values must be included."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The updated event."
              },
              {
                "key": "stoppedId",
                "type": "[identifier](#data-structure-identifier)",
                "description": "(**DEPRECATED**)  \nOnly in `singleActivity` streams. If set, indicates the id of the previously running period event that was stopped as a consequence of modifying the event."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "(**DEPRECATED**)  \nOnly in `singleActivity` streams. The duration of the period event cannot be set to `null` (i.e. still running) if one or more other period event(s) exist later in time. The error's `data.conflictingEventId` provides the id of the closest conflicting event."
            },
            {
              "key": "periods-overlap",
              "http": "400",
              "description": "(**DEPRECATED**)  \nOnly in `singleActivity` streams. The time and/or duration of the period event cannot be set to overlap with other period events. The overlapping events' ids are listed as an array in the error's `data.overlappedIds`."
            }
          ],
          "examples": [
            {
              "title": "Adding a tag",
              "params": {
                "update": {
                  "tags": [
                    "home"
                  ]
                }
              },
              "result": {
                "event": {
                  "tags": [
                    "home"
                  ],
                  "modified": 1585065218.491,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je",
                  "id": "ck862wm210013chpvpj6f78m2",
                  "time": 1350373077.359,
                  "streamId": "diary",
                  "type": "position/wgs84",
                  "content": {
                    "latitude": 40.714728,
                    "longitude": -73.998672
                  },
                  "created": 1585058018.473,
                  "createdBy": "ck862wm1h0000chpvf344943e"
                }
              }
            }
          ]
        },
        {
          "id": "events.addAttachment",
          "type": "method",
          "title": "Add attachment(s)",
          "httpOnly": true,
          "http": "POST /events/{id}",
          "description": "Adds one or more file attachments to the event. This request expects standard multipart/form-data content, with all content parts being the attached files.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The updated event."
              }
            ]
          },
          "examples": [
            {
              "title": "cURL",
              "content": "```bash\ncurl -i -F \"file=@travel-expense.jpg\" \"https://${token}@${username}.pryv.me/events/ck862wm21000pchpvvx1c6c59\"\"\n```",
              "result": {
                "event": {
                  "id": "ck862wm21000pchpvvx1c6c59",
                  "time": 1585065218.473,
                  "duration": null,
                  "streamId": "ck862wm20000dchpvzbs7gofn",
                  "tags": [],
                  "type": "activity/pryv",
                  "content": null,
                  "attachments": [
                    {
                      "id": "ck862wm21000qchpv2mydvzc1",
                      "fileName": "travel-expense.jpg",
                      "type": "image/jpeg",
                      "size": 1111,
                      "readToken": "ck862wm21000rchpv4zbs59c8-Wn0iXWetYaMIJFyWrPgTMaud4J9"
                    }
                  ],
                  "created": 1585065218.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "events.getAttachment",
          "type": "method",
          "title": "Get attachment",
          "httpOnly": true,
          "http": "GET /events/{id}/{fileId}[/{fileName}]",
          "description": "Gets the attached file. Accepts an arbitrary filename path suffix (ignored) for easier link readability.\nFor this function using the `auth` query parameter is not accepted. You can either use the [access token](#data-structure-access) in the `Authorization` header or provide the `readToken` as query parameter.",
          "params": {
            "properties": [
              {
                "key": "readToken",
                "type": "string",
                "http": {
                  "text": "set in request path"
                },
                "description": "Required if not using the `Authorization` HTTP header. The file read token to authentify the request. See [`event.attachments[].readToken`](#data-structure-event) for more info."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "description": "The file's content."
          }
        },
        {
          "id": "events.deleteAttachment",
          "type": "method",
          "title": "Delete attachment",
          "http": "DELETE /events/{id}/{fileId}",
          "description": "Irreversibly deletes the attached file.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the event."
              },
              {
                "key": "fileId",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the attached file."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The updated event."
              }
            ]
          },
          "examples": [
            {
              "params": {
                "id": "ck862wm21000pchpvvx1c6c59",
                "fileId": "ck862wm21000qchpv2mydvzc1"
              },
              "result": {
                "event": {
                  "id": "ck862wm21000pchpvvx1c6c59",
                  "time": 1585065218.473,
                  "duration": null,
                  "streamId": "ck862wm20000dchpvzbs7gofn",
                  "tags": [],
                  "type": "activity/pryv",
                  "content": null,
                  "created": 1585065218.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "events.delete",
          "type": "method",
          "title": "Delete event",
          "http": "DELETE /events/{id}",
          "description": "Trashes or deletes the specified event, depending on its current state:\n\n- If the event is not already in the trash, it will be moved to the trash (i.e. flagged as `trashed`)\n- If the event is already in the trash, it will be irreversibly deleted (including all its attached files, if any).",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the event."
              }
            ]
          },
          "result": [
            {
              "title": "Result: trashed",
              "http": "200 OK",
              "properties": [
                {
                  "key": "event",
                  "type": "[event](#data-structure-event)",
                  "description": "The trashed event."
                }
              ]
            },
            {
              "title": "Result: deleted",
              "http": "200 OK",
              "properties": [
                {
                  "key": "eventDeletion",
                  "type": "[item deletion](#data-structure-item-deletion)",
                  "description": "The event deletion record."
                }
              ]
            }
          ],
          "examples": [
            {
              "title": "Trashing",
              "params": {
                "id": "ck862wm21000wchpvcqaj50xl"
              },
              "result": {
                "event": {
                  "trashed": true,
                  "modified": 1585065218.491,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je",
                  "id": "ck862wm21000wchpvcqaj50xl",
                  "time": 1585061618.473,
                  "streamId": "diary",
                  "tags": [],
                  "type": "note/text",
                  "content": "道可道非常道。。。",
                  "created": 1585061618.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            },
            {
              "title": "Deleting",
              "params": {
                "id": "ck862wm21000wchpvcqaj50xl"
              },
              "result": {
                "eventDeletion": {
                  "id": "ck862wm21000wchpvcqaj50xl"
                }
              }
            }
          ]
        }
      ]
    },
    {
      "id": "hfs",
      "title": "HF events",
      "description": "Methods to manipulate high-frequency data through HF events and [HF series](#data-structure-high-frequency-series).",
      "sections": [
        {
          "id": "hfs.create",
          "type": "method",
          "title": "Create HF event",
          "http": "POST /events",
          "description": "Creates a new event that will be holding [HF series](#data-structure-high-frequency-series).",
          "params": {
            "description": "The new event's data: see [Event](#data-structure-event).\n\nThe content of HF events is read-only, so you should not provide any content.\nHowever, the event type should correspond to the type of the data points in the series, prefixed with `series:`.\nFor example, to store HF series of `mass/kg` data points, the type of the holder event should be `series:mass/kg`."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "event",
                "type": "[event](#data-structure-event)",
                "description": "The created event."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The referenced stream is in the trash, and we prevent the recording of new events into trashed streams."
            },
            {
              "key": "invalid-parameters-format",
              "http": "400",
              "description": "The event content's format is invalid. Events of type High-frequency have a read-only content."
            }
          ],
          "examples": [
            {
              "title": "Creating a new HF event that will hold HF series",
              "params": {
                "streamId": "position",
                "type": "series:position/wgs84"
              },
              "result": {
                "event": {
                  "id": "ck862wm210014chpvoxykhnpf",
                  "time": 1585065218.473,
                  "streamId": "position",
                  "tags": [],
                  "type": "series:position/wgs84",
                  "content": {
                    "elementType": "position/wgs84",
                    "fields": [
                      "deltaTime",
                      "latitude",
                      "longitude",
                      "altitude",
                      "horizontalAccuracy",
                      "verticalAccuracy",
                      "speed",
                      "bearing"
                    ],
                    "required": [
                      "deltaTime",
                      "latitude",
                      "longitude"
                    ]
                  },
                  "created": 1585065218.473,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.473,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "hfs.get",
          "type": "method",
          "httpOnly": true,
          "title": "Get HF series data points",
          "http": "GET /events/{id}/series",
          "description": "Retrieves HF series data points from a HF event.\nReturns data in order of ascending deltaTime between \"fromTime\" and \"toTime\".\nData is returned as input, no sampling or aggregation is performed.",
          "params": {
            "properties": [
              {
                "key": "fromDeltaTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "Only returns data points later than this deltaTime. If no value is given the query will return data starting at the earliest deltaTime in the series."
              },
              {
                "key": "toDeltaTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "Only returns data points earlier than this deltaTime. If no value is given the server will return only data that is in the past."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "description": "The [HF series data points](#data-structure-high-frequency-series)."
          },
          "examples": [
            {
              "title": "Retrieving HF series data points from a HF event",
              "params": {},
              "result": {
                "format": "flatJSON",
                "fields": [
                  "deltaTime",
                  "latitude",
                  "longitude",
                  "altitude"
                ],
                "points": [
                  [
                    0,
                    10.2,
                    11.2,
                    500
                  ],
                  [
                    1,
                    10.2,
                    11.2,
                    510
                  ],
                  [
                    2,
                    10.2,
                    11.2,
                    520
                  ]
                ]
              }
            }
          ]
        },
        {
          "id": "hfs.add",
          "type": "method",
          "httpOnly": true,
          "title": "Add HF series data points",
          "http": "POST /events/{id}/series",
          "description": "Adds new HF series data points to a HF event.\n\nThe HF series data will only store one set of values for any given deltaTime. This means you can update existing data points by 'adding' new data with the original deltaTime.  ",
          "params": {
            "description": "The new HF series data point(s), see [HF series](#data-structure-high-frequency-series)."
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "status",
                "type": "string",
                "description": "The string \"ok\"."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The event is not a HF event."
            },
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The referenced HF event is in the trash, and we prevent the recording of new data points into trashed events."
            }
          ],
          "examples": [
            {
              "title": "Adding new HF series data points to a HF event",
              "params": {
                "format": "flatJSON",
                "fields": [
                  "deltaTime",
                  "latitude",
                  "longitude",
                  "altitude"
                ],
                "points": [
                  [
                    0,
                    10.2,
                    11.2,
                    500
                  ],
                  [
                    1,
                    10.2,
                    11.2,
                    510
                  ],
                  [
                    2,
                    10.2,
                    11.2,
                    520
                  ]
                ]
              },
              "result": {
                "status": "ok"
              }
            }
          ]
        },
        {
          "id": "hfs.addBatch",
          "type": "method",
          "httpOnly": true,
          "title": "Add HF series batch",
          "http": "POST /series/batch",
          "description": "Adds data to multiple HF series (stored in multiple HF events) in a single atomic operation. This is the fastest way to append data to Pryv; it allows transferring many data points in a single request.\n\nFor this operation to be successful, all of the following conditions must be fulfilled:\n\n  - The access token needs write permissions to all series identified by \"eventId\".\n  - All events referred to must be HF events (type starts with the string \"series:\").\n  - Fields identified in each individual message must match those specified by the type of the HF event; there must be no duplicates.\n  - All the values in every data point must conform to the type specification.\n\nIf any part of the batch message is invalid, the entire batch is aborted and the returned result body identifies the error.",
          "params": {
            "properties": [
              {
                "key": "format",
                "type": "string",
                "description": "The format string \"seriesBatch\"."
              },
              {
                "key": "data",
                "type": "array",
                "description": "Array of batch entries. Each batch entry is defined as follows:",
                "properties": [
                  {
                    "key": "eventId",
                    "type": "string",
                    "description": "The id of the HF event."
                  },
                  {
                    "key": "data",
                    "type": "object",
                    "description": "HF series data to add to the HF event."
                  }
                ]
              }
            ]
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "status",
                "type": "string",
                "description": "The string \"ok\"."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-request-structure",
              "http": "400",
              "description": "The request was malformed and could not be executed. The entire operation was aborted."
            }
          ],
          "examples": [
            {
              "title": "Adding a batch of HF series data to multiple HF events",
              "params": {
                "format": "seriesBatch",
                "data": [
                  {
                    "eventId": "ck862wm210015chpvnkbwkk85",
                    "data": {
                      "format": "flatJSON",
                      "fields": [
                        "deltaTime",
                        "value"
                      ],
                      "points": [
                        [
                          0,
                          70
                        ],
                        [
                          1,
                          71
                        ],
                        [
                          2,
                          72
                        ]
                      ]
                    }
                  },
                  {
                    "eventId": "ck862wm210016chpvixj67sn5",
                    "data": {
                      "format": "flatJSON",
                      "fields": [
                        "deltaTime",
                        "latitude",
                        "longitude",
                        "altitude"
                      ],
                      "points": [
                        [
                          0,
                          10.2,
                          11.2,
                          500
                        ],
                        [
                          2,
                          10.2,
                          11.2,
                          510
                        ],
                        [
                          1,
                          10.2,
                          11.2,
                          520
                        ]
                      ]
                    }
                  }
                ]
              },
              "result": {
                "status": "ok"
              }
            }
          ]
        },
        {
          "id": "hfs.update",
          "type": "method",
          "title": "Update HF event",
          "http": "PUT /events/{id}",
          "description": "Similar to the standard [Update event](#methods-events-events-update) method.\n\nYou may update all non read-only fields, except `content` which is read-only for HF events.",
          "errors": [
            {
              "key": "invalid-parameters-format",
              "http": "400",
              "description": "The event content's format is invalid. Events of type High-frequency have a read-only content."
            }
          ]
        },
        {
          "id": "hfs.delete",
          "type": "method",
          "title": "Delete HF event",
          "http": "DELETE /events/{id}",
          "description": "Similar to the standard [Delete event](#methods-events-events-delete) method."
        }
      ]
    },
    {
      "id": "streams",
      "title": "Streams",
      "description": "Methods to retrieve and manipulate [streams](#data-structure-stream).",
      "sections": [
        {
          "id": "streams.get",
          "type": "method",
          "title": "Get streams",
          "http": "GET /streams",
          "description": "Gets the accessible streams hierarchy.",
          "params": {
            "properties": [
              {
                "key": "parentId",
                "type": "[identifier](#data-structure-identifier)",
                "optional": true,
                "description": "The id of the parent stream from which to retrieve streams. Default: `null` (returns all accessible streams from the root level)."
              },
              {
                "key": "state",
                "type": "`default`|`all`",
                "optional": true,
                "description": "By default, only items that are not in the trash are returned; `all` return all items regardless of their state."
              },
              {
                "key": "includeDeletionsSince",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "Whether to include stream deletions since that time for sync purposes."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "streams",
                "type": "array of [streams](#data-structure-stream)",
                "description": "The tree of the accessible streams, sorted by name."
              },
              {
                "key": "streamDeletions",
                "type": "array of [item deletions](#data-structure-item-deletion)",
                "optional": true,
                "description": "If requested by `includeDeletionsSince`, the stream deletions since then, ordered by deletion time."
              }
            ]
          },
          "examples": [
            {
              "title": "Retrieving streams for work activities",
              "params": {
                "parentId": "work"
              },
              "result": {
                "streams": [
                  {
                    "id": "ck862wm20000cchpvkt6qzgos",
                    "name": "Noble Works Co.",
                    "parentId": "work",
                    "children": [
                      {
                        "id": "ck862wm20000echpv0tcqp3aq",
                        "name": "Last Be First",
                        "parentId": "ck862wm20000cchpvkt6qzgos",
                        "children": [],
                        "created": 1521951345.8076959,
                        "createdBy": "ck862wm1h0000chpvf344943e",
                        "modified": 1521951352.933682,
                        "modifiedBy": "ck862wm1h0000chpvf344943e"
                      },
                      {
                        "id": "ck862wm20000fchpv5cm06yi4",
                        "name": "Big Tree",
                        "parentId": "ck862wm20000cchpvkt6qzgos",
                        "children": [],
                        "created": 1521951345.8076959,
                        "createdBy": "ck862wm1h0000chpvf344943e",
                        "modified": 1521951676.491873,
                        "modifiedBy": "ck862wm1h0000chpvf344943e"
                      },
                      {
                        "id": "ck862wm20000gchpv67zyzhol",
                        "name": "Inner Light",
                        "parentId": "ck862wm20000cchpvkt6qzgos",
                        "children": [],
                        "created": 1521951345.8076959,
                        "createdBy": "ck862wm1h0000chpvf344943e",
                        "modified": 1521951485.1222064,
                        "modifiedBy": "ck862wm1h0000chpvf344943e"
                      }
                    ],
                    "created": 1521951322.3053699,
                    "createdBy": "ck862wm1h0000chpvf344943e",
                    "modified": 1521951390.7363095,
                    "modifiedBy": "ck862wm1h0000chpvf344943e"
                  },
                  {
                    "id": "ck862wm20000dchpvzbs7gofn",
                    "name": "Freelancing",
                    "parentId": "work",
                    "children": [
                      {
                        "id": "ck862wm20000hchpv70a5f2pk",
                        "name": "Funky Veggies",
                        "parentId": "ck862wm20000dchpvzbs7gofn",
                        "children": [],
                        "created": 1521951341.9263306,
                        "createdBy": "ck862wm1h0000chpvf344943e",
                        "modified": 1521951376.7401385,
                        "modifiedBy": "ck862wm1h0000chpvf344943e"
                      },
                      {
                        "id": "ck862wm20000ichpvu47il9ga",
                        "name": "Jojo Lapin & sons",
                        "parentId": "ck862wm20000dchpvzbs7gofn",
                        "children": [],
                        "created": 1521951341.9263306,
                        "createdBy": "ck862wm1h0000chpvf344943e",
                        "modified": 1521951567.6058087,
                        "modifiedBy": "ck862wm1h0000chpvf344943e"
                      }
                    ],
                    "created": 1521951322.3053699,
                    "createdBy": "ck862wm1h0000chpvf344943e",
                    "modified": 1521951436.9561229,
                    "modifiedBy": "ck862wm1h0000chpvf344943e"
                  }
                ]
              }
            }
          ]
        },
        {
          "id": "streams.create",
          "type": "method",
          "title": "Create stream",
          "http": "POST /streams",
          "description": "Creates a new stream.",
          "params": {
            "description": "The new stream's data: see [stream](#data-structure-stream)."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "stream",
                "type": "[stream](#data-structure-stream)",
                "description": "The created stream."
              }
            ]
          },
          "errors": [
            {
              "key": "item-already-exists",
              "http": "400",
              "description": "A similar stream already exists. The error's `data` contains the conflicting properties."
            },
            {
              "key": "invalid-item-id",
              "http": "400",
              "description": "The specified id is invalid (e.g. it's a reserved word such as `null`)."
            }
          ],
          "examples": [
            {
              "title": "Create sub-stream 'diastolic' of 'heart'",
              "params": {
                "id": "diastolic",
                "name": "Diastolic pressure",
                "parentId": "heart"
              },
              "result": {
                "stream": {
                  "id": "diastolic",
                  "name": "Diastolic pressure",
                  "parentId": "heart",
                  "children": [],
                  "created": 1585065218.472,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.472,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "streams.update",
          "type": "method",
          "title": "Update stream",
          "http": "PUT /streams/{id}",
          "description": "Modifies the stream.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the stream."
              },
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "New values for the stream's fields: see [stream](#data-structure-stream). All fields are optional, and only modified values must be included."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "stream",
                "type": "[stream](#data-structure-stream)",
                "description": "The updated stream (without child streams)."
              }
            ]
          },
          "errors": [
            {
              "key": "item-already-exists",
              "http": "400",
              "description": "A similar stream already exists. The error's `data` contains the conflicting properties."
            }
          ],
          "examples": [
            {
              "title": "Renaming a stream",
              "params": {
                "id": "sport",
                "update": {
                  "name": "Slothing"
                }
              },
              "result": {
                "stream": {
                  "name": "Slothing",
                  "modified": 1585065218.492,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je",
                  "id": "sport",
                  "parentId": null,
                  "created": 1521951314.472,
                  "createdBy": "ck862wm1h0000chpvf344943e"
                }
              }
            }
          ]
        },
        {
          "id": "streams.delete",
          "type": "method",
          "title": "Delete stream",
          "http": "DELETE /streams/{id}",
          "description": "Trashes or deletes the specified stream, depending on its current state:\n\n- If the stream is not already in the trash, it will be moved to the trash (i.e. flagged as `trashed`)\n- If the stream is already in the trash, it will be irreversibly deleted with its descendants (if any). If events exist that refer to the deleted item(s), you must indicate how to handle them with the parameter `mergeEventsWithParent`.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the stream."
              },
              {
                "key": "mergeEventsWithParent",
                "type": "`true`|`false`",
                "description": "Required if actually deleting the item and if it (or any of its descendants) has linked events, ignored otherwise. If `true`, the linked events will be assigned to the parent of the deleted item; if `false`, the linked events will be deleted."
              }
            ]
          },
          "result": [
            {
              "title": "Result: trashed",
              "http": "200 OK",
              "properties": [
                {
                  "key": "stream",
                  "type": "[stream](#data-structure-stream)",
                  "description": "The trashed stream."
                }
              ]
            },
            {
              "title": "Result: deleted",
              "http": "200 OK",
              "properties": [
                {
                  "key": "streamDeletion",
                  "type": "[item deletion](#data-structure-item-deletion)",
                  "description": "The stream deletion record."
                }
              ]
            }
          ],
          "examples": [
            {
              "title": "Trashing",
              "params": {
                "id": "weight"
              },
              "result": {
                "event": {
                  "trashed": true,
                  "modified": 1585065218.492,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je",
                  "id": "weight",
                  "name": "Weight",
                  "parentId": "health",
                  "children": [],
                  "created": 1521951319.4834833,
                  "createdBy": "ck862wm1h0000chpvf344943e"
                }
              }
            },
            {
              "title": "Deleting",
              "params": {
                "id": "weight"
              },
              "result": {
                "streamDeletion": {
                  "id": "weight"
                }
              }
            }
          ]
        }
      ]
    },
    {
      "id": "accesses",
      "title": "Accesses",
      "description": "Methods to retrieve and manipulate [accesses](#data-structure-access), e.g. for sharing.\nAny app can manage shared accesses whose permissions are a subset of its own. (Full access management is available to trusted apps.)",
      "sections": [
        {
          "id": "accesses.get",
          "type": "method",
          "title": "Get accesses",
          "http": "GET /accesses",
          "description": "Gets manageable accesses. Only returns accesses that can\nbe managed by the requesting access and that are active when\nmaking the request. To include accesses that have expired, use\nthe `includeExpired` parameter.",
          "params": {
            "properties": [
              {
                "key": "includeExpired",
                "type": "boolean",
                "optional": true,
                "description": "If `true`, also includes expired accesses. Defaults to `false`."
              },
              {
                "key": "includeDeletions",
                "type": "boolean",
                "optional": true,
                "description": "If `true`, also includes deleted accesses. Defaults to `false`."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "accesses",
                "type": "array of [accesses](#data-structure-access)",
                "description": "All manageable accesses in the user's account, ordered by name."
              },
              {
                "key": "accessDeletions",
                "type": "array of deleted [accesses](#data-structure-access)",
                "description": "If requested by `includeDeletions`, the access deletions, ordered by deletion time."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "accesses": [
                  {
                    "id": "ck862wm1i0004chpvcorv9zs1",
                    "token": "ck862wm1i0005chpvu8xk4x01",
                    "type": "shared",
                    "name": "Arthur",
                    "permissions": [
                      {
                        "streamId": "family",
                        "level": "contribute"
                      }
                    ],
                    "created": 1585022018.454,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585022018.454,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  }
                ]
              }
            },
            {
              "title": "cURL with deletions",
              "params": "```bash\ncurl -i \"https://${token}@${username}.pryv.me/accesses?includeDeletions=true\n```",
              "result": {
                "accesses": [
                  {
                    "id": "ck862wm1i0004chpvcorv9zs1",
                    "token": "ck862wm1i0005chpvu8xk4x01",
                    "type": "shared",
                    "name": "Arthur",
                    "permissions": [
                      {
                        "streamId": "family",
                        "level": "contribute"
                      }
                    ],
                    "created": 1585022018.454,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585022018.454,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je"
                  }
                ],
                "accessDeletions": [
                  {
                    "id": "ck862wm1i0008chpv2zvrlslp",
                    "token": "ck862wm1i0009chpvrb4yx5xu",
                    "type": "shared",
                    "name": "Health parameters survey",
                    "permissions": [
                      {
                        "streamId": "health",
                        "level": "read"
                      }
                    ],
                    "created": 1585065098.454,
                    "createdBy": "ck862wm1i0001chpveac1g3je",
                    "modified": 1585065098.454,
                    "modifiedBy": "ck862wm1i0001chpveac1g3je",
                    "deleted": 1585065158.454
                  }
                ]
              }
            }
          ]
        },
        {
          "id": "accesses.create",
          "type": "method",
          "title": "Create access",
          "http": "POST /accesses",
          "description": "Creates a new access. You can only create accesses whose permissions are a subset of those granted to your own access token.",
          "params": {
            "description": "An object with the new access's data: see [access](#data-structure-access)."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "access",
                "type": "[access](#data-structure-access)",
                "description": "The created access."
              }
            ]
          },
          "errors": [
            {
              "key": "invalid-item-id",
              "http": "400",
              "description": "The specified token is invalid (e.g. it's a reserved word such as `null`)."
            }
          ],
          "examples": [
            {
              "params": {
                "name": "For colleagues",
                "permissions": [
                  {
                    "streamId": "work",
                    "level": "read"
                  }
                ]
              },
              "result": {
                "access": {
                  "id": "ck862wm1i0006chpvprrhl273",
                  "token": "ck862wm1i0007chpvbman0lma",
                  "type": "shared",
                  "name": "For colleagues",
                  "permissions": [
                    {
                      "streamId": "work",
                      "level": "read"
                    }
                  ],
                  "created": 1585065218.454,
                  "createdBy": "ck862wm1i0001chpveac1g3je",
                  "modified": 1585065218.454,
                  "modifiedBy": "ck862wm1i0001chpveac1g3je"
                }
              }
            }
          ]
        },
        {
          "id": "accesses.delete",
          "type": "method",
          "title": "Delete access",
          "http": "DELETE /accesses/{id}",
          "description": "Deletes the specified access. You can only delete accesses whose permissions are a subset of those granted to your own access token.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the access."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "accessDeletion",
                "type": "[item deletion](#data-structure-item-deletion)",
                "description": "The deletion record."
              }
            ]
          },
          "examples": [
            {
              "params": {
                "id": "ck862wm1i0004chpvcorv9zs1"
              },
              "result": {
                "accessDeletion": {
                  "id": "ck862wm1i0004chpvcorv9zs1"
                }
              }
            }
          ]
        },
        {
          "id": "accesses.checkApp",
          "type": "method",
          "trustedOnly": true,
          "title": "Check app authorization",
          "http": "POST /accesses/check-app",
          "description": "For the app authorization process. Checks if the app requesting authorization already has access with the same permissions (and on the same device, if applicable), and returns details of the requested permissions' streams (for display) if not.",
          "params": {
            "properties": [
              {
                "key": "requestingAppId",
                "type": "string",
                "description": "The id of the app requesting authorization."
              },
              {
                "key": "deviceName",
                "type": "string",
                "optional": true,
                "description": "The name of the device running the app requesting authorization, if applicable."
              },
              {
                "key": "requestedPermissions",
                "type": "array of permission request objects",
                "description": "An array of permission request objects, which are identical to stream permission objects of [accesses](#data-structure-access) except that each stream permission object must have a `defaultName` property specifying the name the stream should be created with later if missing."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "checkedPermissions",
                "type": "array of permission request objects",
                "description": "Set if no matching access already exists.\nA updated copy of the `requestedPermissions` parameter, with the `defaultName` property of stream permissions replaced by `name` for each existing stream (set to the actual name of the item). (For missing streams the `defaultName` property is left untouched.) If streams already exist with the same name but a different `id`, `defaultName` is updated with a valid alternative proposal (in such cases the result also has an `error` property to signal the issue)."
              },
              {
                "key": "mismatchingAccess",
                "type": "[access](#data-structure-access)",
                "description": "Set if an access already exists for the requesting app, but with different permissions than those requested."
              },
              {
                "key": "matchingAccess",
                "type": "[access](#data-structure-access)",
                "description": "Set if an access already exists for the requesting app with matching permissions. The existing [access](#data-structure-access)."
              }
            ]
          },
          "examples": []
        }
      ]
    },
    {
      "id": "audit",
      "title": "Audit",
      "description": "Methods to retrieve [Audit logs](#data-structure-audit-log).",
      "sections": [
        {
          "id": "audit.get",
          "type": "method",
          "title": "Get audit logs",
          "http": "GET /audit/logs",
          "description": "Fetches accessible audit logs.\nBy default, only returns logs that involve the access corresponding to the provided authorization token (self-auditing).",
          "params": {
            "properties": [
              {
                "key": "accessId",
                "type": "[identifier](#data-structure-identifier)",
                "optional": true,
                "description": "The id of a specific access to audit.\nWhen specified, it fetches the audit logs that involve the matching access instead of the one used to authenticate this call.\nIt has to correspond to a sub-access (expired and deleted included) in regards to the provided authorization token."
              },
              {
                "key": "fromTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "The start time of the timeframe you want to retrieve audit logs for.\nTimestamps are considered with a day precision."
              },
              {
                "key": "toTime",
                "type": "[timestamp](#data-structure-timestamp)",
                "optional": true,
                "description": "The end time of the timeframe you want to retrieve audit logs for.\nTimestamps are considered with a day precision."
              },
              {
                "key": "status",
                "type": "number",
                "optional": true,
                "description": "Filters audit logs by HTTP response status, a 3-digits number.\nIt is possible to provide only the first digit,\nin which case the two unspecified digits will be wildcarded.\nFor example, `status=4` will return all logs with status between 400 and 499."
              },
              {
                "key": "ip",
                "type": "string",
                "optional": true,
                "description": "Filters audit logs by client IP address present in the `forwardedFor` property."
              },
              {
                "key": "httpVerb",
                "type": "string",
                "optional": true,
                "description": "Filters audit logs by HTTP verb present in the `action` property."
              },
              {
                "key": "resource",
                "type": "string",
                "optional": true,
                "description": "Filters audit logs by API resource present in the `action` property."
              },
              {
                "key": "errorId",
                "type": "string",
                "optional": true,
                "description": "Filters audit logs by error id."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "auditLogs",
                "type": "array of [Audit logs](#data-structure-audit-log)",
                "description": "The accessible audit logs."
              }
            ]
          },
          "errors": [
            {
              "key": "forbidden",
              "http": "403",
              "description": "Authorization token is not authorized to audit the given access.\n\nWhen providing a specific access id, if the result of [Get Accesses](#methods-accesses-accesses-get)\nusing the provided Authorization token does not contain the given access, then it is not auditable."
            }
          ],
          "examples": [
            {
              "params": {
                "auth": "ck862wm23001mchpvevwb8dx3",
                "accessId": "ck862wm23001lchpvh7llbww8",
                "fromTime": 1561000000,
                "toTime": 1562000000,
                "status": 403,
                "ip": "172.18.0.7",
                "httpVerb": "GET",
                "resource": "/events",
                "errorId": "forbidden"
              },
              "result": {
                "auditLogs": [
                  {
                    "id": "ck862wm23001nchpvx60hiyvl",
                    "type": "audit/core",
                    "time": 1561988300,
                    "forwardedFor": "172.18.0.7",
                    "action": "GET /events",
                    "query": "streamId=diary",
                    "accessId": "ck862wm23001lchpvh7llbww8",
                    "status": 403,
                    "errorMessage": "Access session has expired.",
                    "errorId": "forbidden"
                  },
                  {
                    "id": "ck862wm23001ochpv6vdms6l1",
                    "type": "audit/core",
                    "time": 1561988900,
                    "forwardedFor": "172.18.0.7",
                    "action": "GET /events",
                    "query": "streamId=diary",
                    "accessId": "ck862wm23001lchpvh7llbww8",
                    "status": 403,
                    "errorMessage": "Access session has expired.",
                    "errorId": "forbidden"
                  },
                  {
                    "id": "ck862wm23001pchpvlgqzf7p0",
                    "type": "audit/core",
                    "time": 1561989200,
                    "forwardedFor": "172.18.0.7",
                    "action": "GET /events",
                    "query": "streamId=work",
                    "accessId": "ck862wm23001lchpvh7llbww8",
                    "status": 403,
                    "errorMessage": "Access session has expired.",
                    "errorId": "forbidden"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "webhooks",
      "title": "Webhooks",
      "description": "Methods to retrieve and manipulate [webhooks](#data-structure-webhook). These methods are only allowed for app and personal accesses.",
      "sections": [
        {
          "id": "webhooks.get",
          "type": "method",
          "title": "Get webhooks",
          "http": "GET /webhooks",
          "description": "Gets manageable webhooks. Only returns webhooks that were created by the access, unless you are using a personal access which returns all existing webhooks in the user's account.",
          "params": {
            "properties": []
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "webhooks",
                "type": "array of [webhooks](#data-structure-webhook)",
                "description": "All manageable webhooks by the given access, ordered by modified date."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "webhooks": [
                  {
                    "id": "ck862wm23001gchpv2fi0rpsg",
                    "accessId": "ck862wm23001echpve30ciylo",
                    "url": "https://notifications.service.com/pryv",
                    "minIntervalMs": 5000,
                    "maxRetries": 5,
                    "currentRetries": 0,
                    "state": "active",
                    "runCount": 2,
                    "failCount": 0,
                    "lastRun": {
                      "status": 200,
                      "timestamp": 1585061618.475
                    },
                    "runs": [
                      {
                        "status": 200,
                        "timestamp": 1585061618.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585058018.475
                      }
                    ],
                    "created": 1584978818.475,
                    "createdBy": "ck862wm23001echpve30ciylo",
                    "modified": 1584978818.475,
                    "modifiedBy": "ck862wm23001echpve30ciylo"
                  },
                  {
                    "id": "ck862wm23001ichpv04mk162h",
                    "accessId": "ck862wm23001echpve30ciylo",
                    "url": "https://notifications.pryv.me/webhooks",
                    "minIntervalMs": 5000,
                    "maxRetries": 5,
                    "currentRetries": 2,
                    "state": "active",
                    "runCount": 8,
                    "failCount": 2,
                    "lastRun": {
                      "status": 200,
                      "timestamp": 1585065213.475
                    },
                    "runs": [
                      {
                        "status": 500,
                        "timestamp": 1585065213.475
                      },
                      {
                        "status": 500,
                        "timestamp": 1585065208.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585064618.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585064018.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585063418.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585062818.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585062218.475
                      },
                      {
                        "status": 200,
                        "timestamp": 1585061618.475
                      }
                    ],
                    "created": 1584892418.475,
                    "createdBy": "ck862wm23001echpve30ciylo",
                    "modified": 1584892418.475,
                    "modifiedBy": "ck862wm23001echpve30ciylo"
                  }
                ]
              }
            }
          ]
        },
        {
          "id": "webhooks.getOne",
          "type": "method",
          "title": "Get one webhook",
          "http": "GET /webhooks/{id}",
          "description": "Fetches a specific webhook. Only returns a webhook if it was created by the access, unless you are using a personal access which is allowed to fetch any existing webhook in the user's account.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the webhook."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "webhook",
                "type": "[webhook](#data-structure-webhook)",
                "description": "The webhook."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "webhook": {
                  "id": "ck862wm23001gchpv2fi0rpsg",
                  "accessId": "ck862wm23001echpve30ciylo",
                  "url": "https://notifications.service.com/pryv",
                  "minIntervalMs": 5000,
                  "maxRetries": 5,
                  "currentRetries": 0,
                  "state": "active",
                  "runCount": 2,
                  "failCount": 0,
                  "lastRun": {
                    "status": 200,
                    "timestamp": 1585061618.475
                  },
                  "runs": [
                    {
                      "status": 200,
                      "timestamp": 1585061618.475
                    },
                    {
                      "status": 200,
                      "timestamp": 1585058018.475
                    }
                  ],
                  "created": 1584978818.475,
                  "createdBy": "ck862wm23001echpve30ciylo",
                  "modified": 1584978818.475,
                  "modifiedBy": "ck862wm23001echpve30ciylo"
                }
              }
            }
          ]
        },
        {
          "id": "webhooks.create",
          "type": "method",
          "title": "Create webhook",
          "http": "POST /webhooks",
          "description": "Creates a new webhook. You can only create webhooks with app accesses.",
          "params": {
            "description": "An object with the new webhook's data: see [webhook](#data-structure-webhook)."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "webhook",
                "type": "[webhook](#data-structure-webhook)",
                "description": "The created webhook."
              }
            ]
          },
          "errors": [],
          "examples": [
            {
              "params": {
                "url": "https://sievey.io/webhooks"
              },
              "result": {
                "webhook": {
                  "id": "ck862wm23001jchpvt5fqy678",
                  "accessId": "ck862wm23001fchpv8y6mffiu",
                  "url": "https://sievey.io/webhooks",
                  "minIntervalMs": 5000,
                  "maxRetries": 5,
                  "currentRetries": 0,
                  "state": "active",
                  "runCount": 0,
                  "failCount": 0,
                  "lastRun": {},
                  "runs": [],
                  "created": 1585065213.475,
                  "createdBy": "ck862wm23001fchpv8y6mffiu",
                  "modified": 1585065213.475,
                  "modifiedBy": "ck862wm23001fchpv8y6mffiu"
                }
              }
            }
          ]
        },
        {
          "id": "webhooks.update",
          "type": "method",
          "title": "Update webhook",
          "http": "PUT /webhooks/{id}",
          "description": "Modifies the webhook. You can only modify webhooks with the app access that was used to create them, unless you are using a personal token.  \nUpdating the `state` to `active` resets the `currentRetries` counter.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the webhook."
              },
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "New values for the webhook's fields: see [webhook](#data-structure-webhook). All fields are optional, and only modified values must be included.  "
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "webhook",
                "type": "[webhook](#data-structure-webhook)",
                "description": "The updated webhook."
              }
            ]
          },
          "errors": [
            {
              "key": "item-already-exists",
              "http": "400",
              "description": "There is already a webhook for this URL created by the given access."
            }
          ],
          "examples": [
            {
              "title": "Reactivating a webhook",
              "params": {
                "state": "active"
              },
              "result": {
                "webhook": {
                  "id": "ck862wm23001hchpvxerecv0w",
                  "accessId": "ck862wm23001echpve30ciylo",
                  "url": "https://notifications.pryv.me/myusername/ui3HDAw43",
                  "minIntervalMs": 5000,
                  "maxRetries": 5,
                  "state": "active",
                  "currentRetries": 0,
                  "runCount": 5,
                  "failCount": 5,
                  "lastRun": {
                    "status": 404,
                    "timestamp": 1585065203.475
                  },
                  "runs": [
                    {
                      "status": 404,
                      "timestamp": 1585065203.475
                    },
                    {
                      "status": 404,
                      "timestamp": 1585065163.475
                    },
                    {
                      "status": 404,
                      "timestamp": 1585065143.475
                    },
                    {
                      "status": 404,
                      "timestamp": 1585065133.475
                    },
                    {
                      "status": 404,
                      "timestamp": 1585065128.475
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "id": "webhooks.delete",
          "type": "method",
          "title": "Delete webhook",
          "http": "DELETE /webhooks/{id}",
          "description": "Deletes the specified webhook. You can only delete webhooks with the app access that was used to create them, unless you are using a personal token.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the webhook."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "webhookDeletion",
                "type": "[item deletion](#data-structure-item-deletion)",
                "description": "The deletion record."
              }
            ]
          },
          "examples": [
            {
              "params": {
                "id": "ck862wm23001jchpvt5fqy678"
              },
              "result": {
                "webhookDeletion": {
                  "id": "ck862wm23001jchpvt5fqy678"
                }
              }
            }
          ]
        },
        {
          "id": "webhooks.test",
          "type": "method",
          "title": "Test webhook",
          "http": "POST /webhooks/{id}/test",
          "description": "Sends a post request containing a message called `test` to the URL of the specified webhook's `url`. You can only test webhooks with the app access that was used to create them, unless you are using a personal token.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the webhook."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "webhook",
                "type": "[webhook](#data-structure-webhook)",
                "description": "The webhook."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "webhook": {
                  "id": "ck862wm23001jchpvt5fqy678",
                  "accessId": "ck862wm23001fchpv8y6mffiu",
                  "url": "https://sievey.io/webhooks",
                  "minIntervalMs": 5000,
                  "maxRetries": 5,
                  "currentRetries": 0,
                  "state": "active",
                  "runCount": 0,
                  "failCount": 0,
                  "lastRun": {},
                  "runs": [],
                  "created": 1585065213.475,
                  "createdBy": "ck862wm23001fchpv8y6mffiu",
                  "modified": 1585065213.475,
                  "modifiedBy": "ck862wm23001fchpv8y6mffiu"
                }
              }
            }
          ],
          "errors": [
            {
              "key": "unknown-referenced-resource",
              "http": "400",
              "description": "The webhook's `url` is either unreachable or responds with a 4xx/5xx status."
            }
          ]
        }
      ]
    },
    {
      "id": "followed-slices",
      "title": "Followed slices",
      "trustedOnly": true,
      "description": "Methods to retrieve and manipulate [followed slices](#data-structure-followed-slice).",
      "sections": [
        {
          "id": "followedSlices.get",
          "type": "method",
          "title": "Get followed slices",
          "http": "GET /followed-slices",
          "description": "Gets followed slices.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "followedSlices",
                "type": "array of [followed slices](#data-structure-followed-slice)",
                "description": "All followed slices in the user's account, ordered by name."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "followedSlices.create",
          "type": "method",
          "title": "Create followed slice",
          "http": "POST /followed-slices",
          "description": "Creates a new followed slice.",
          "params": {
            "description": "An object with the new followed slice's data: see [followed slice](#data-structure-followed-slice)."
          },
          "result": {
            "http": "201 Created",
            "properties": [
              {
                "key": "followedSlice",
                "type": "[followed slice](#data-structure-followed-slice)",
                "description": "The created followed slice."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "followedSlices.update",
          "type": "method",
          "title": "Update followed slice",
          "http": "PUT /followed-slices/{id}",
          "description": "Modifies the specified followed slice.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the followed slice."
              },
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "New values for the followed slice's fields: see [followed slice](#data-structure-followed-slice). All fields are optional, and only modified values must be included."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "followedSlice",
                "type": "[followed slice](#data-structure-followed-slice)",
                "description": "The updated followed slice."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "followedSlices.delete",
          "type": "method",
          "title": "Delete followed slice",
          "http": "DELETE /followed-slices/{id}",
          "description": "Deletes the specified followed slice.",
          "params": {
            "properties": [
              {
                "key": "id",
                "type": "[identifier](#data-structure-identifier)",
                "http": {
                  "text": "set in request path"
                },
                "description": "The id of the followed slice."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "followedSliceDeletion",
                "type": "[item deletion](#data-structure-item-deletion)",
                "description": "The deletion record."
              }
            ]
          },
          "examples": []
        }
      ]
    },
    {
      "id": "profile",
      "title": "Profile sets",
      "description": "Methods to read and write profile sets. Profile sets are plain key-value stores of user-level settings.",
      "sections": [
        {
          "id": "profile.getApp",
          "type": "method",
          "title": "Get app profile",
          "http": "GET /profile/app",
          "description": "Gets the app's dedicated profile set, which contains app-level settings for the user. Available to app accesses.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The app profile set. (Empty if the app never defined any setting.)"
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "profile": {
                  "setting1": "value",
                  "setting2": true,
                  "setting3": 123
                }
              }
            }
          ]
        },
        {
          "id": "profile.updateApp",
          "type": "method",
          "title": "Update app profile",
          "http": "PUT /profile/app",
          "description": "Adds, updates or delete app profile keys. Available to app accesses.\n\n- To add or update a key, just set its value\n- To delete a key, set its value to `null`\n\nExisting keys not included in the update are left untouched.",
          "params": {
            "properties": [
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "An object with the desired key changes (see above)."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The updated app profile set."
              }
            ]
          },
          "examples": [
            {
              "params": {
                "setting1": "new value",
                "setting2": null
              },
              "result": {
                "profile": {
                  "setting1": "new value",
                  "setting3": 123
                }
              }
            }
          ]
        },
        {
          "id": "profile.getPublic",
          "type": "method",
          "title": "Get public profile",
          "http": "GET /profile/public",
          "description": "Gets the public profile set, which contains the information the user makes publicly available (e.g. avatar image). Available to all accesses.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The public profile set."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "profile": {
                  "avatarURL": "http://www.gravatar.com/avatar/1beb9d80bf842c1d90ebdab356908538"
                }
              }
            }
          ]
        },
        {
          "id": "profile.updatePublic",
          "type": "method",
          "title": "Update public profile",
          "http": "PUT /profile/public",
          "description": "Adds, updates or delete public profile keys. Available to personal accesses.\n\n- To add or update a key, just set its value\n- To delete a key, set its value to `null`\n\nExisting keys not included in the update are left untouched.",
          "params": {
            "properties": [
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "An object with the desired key changes (see above)."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The updated public profile set."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "profile.getPrivate",
          "type": "method",
          "title": "Get private profile",
          "http": "GET /profile/private",
          "description": "Gets the private profile set. Available to personal accesses.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The private profile set."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "profile.updatePrivate",
          "type": "method",
          "title": "Update private profile",
          "http": "PUT /profile/private",
          "description": "Adds, updates or delete private profile keys. Available to personal accesses.\n\n- To add or update a key, just set its value\n- To delete a key, set its value to `null`\n\nExisting keys not included in the update are left untouched.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "profile",
                "type": "object",
                "description": "The updated private profile set."
              }
            ]
          },
          "examples": []
        }
      ]
    },
    {
      "id": "account",
      "title": "Account management",
      "trustedOnly": true,
      "description": "Methods to manage the user's account.",
      "sections": [
        {
          "id": "account.get",
          "type": "method",
          "title": "Get account information",
          "http": "GET /account",
          "description": "Retrieves the user's account information.",
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "account",
                "type": "[account information](#data-structure-account)",
                "description": "The user's account information."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "account": {
                  "username": "chuangzi",
                  "email": "chuangzi@dao.info",
                  "language": "zh"
                }
              }
            }
          ]
        },
        {
          "id": "account.update",
          "type": "method",
          "title": "Update account information",
          "http": "PUT /account",
          "description": "Modifies the user's account information.",
          "params": {
            "properties": [
              {
                "key": "update",
                "type": "object",
                "http": {
                  "text": "request body"
                },
                "description": "New values for the account information's fields: see [account information](#data-structure-account). All fields are optional, and only modified values must be included."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "account",
                "type": "[account information](#data-structure-account)",
                "description": "The updated account information."
              }
            ]
          },
          "examples": []
        },
        {
          "id": "account.changePassword",
          "type": "method",
          "title": "Change password",
          "http": "POST /account/change-password",
          "description": "Modifies the user's password.",
          "params": {
            "properties": [
              {
                "key": "oldPassword",
                "type": "string",
                "description": "The current password."
              },
              {
                "key": "newPassword",
                "type": "string",
                "description": "The new password."
              }
            ]
          },
          "result": {
            "http": "200 OK"
          },
          "errors": [
            {
              "key": "invalid-operation",
              "http": "400",
              "description": "The given password does not match."
            }
          ],
          "examples": [
            {
              "params": {
                "oldPassword": "B|_|tt3rfly!",
                "newPassword": "//\\_.:o0o:._//\\"
              },
              "result": {}
            }
          ]
        },
        {
          "id": "account.requestPasswordReset",
          "type": "method",
          "title": "Request password reset",
          "http": "POST /account/request-password-reset",
          "description": "Requests the resetting of the user's password. An e-mail containing an expiring reset token (e.g. in a link) will be sent to the user.  \nThis method requires that the `appId` and `Origin` (or `Referer`) header comply with the [trusted app verification](#basics-trusted-apps-verification).",
          "params": {
            "properties": [
              {
                "key": "appId",
                "type": "string",
                "description": "Your app's unique identifier."
              }
            ]
          },
          "result": {
            "http": "200 OK"
          },
          "examples": [
            {
              "params": {
                "appId": "my-app-id"
              },
              "result": {}
            }
          ]
        },
        {
          "id": "account.resetPassword",
          "type": "method",
          "title": "Reset password",
          "http": "POST /account/reset-password",
          "description": "Resets the user's password, authenticating the request with the given reset token (see [request password reset](#methods-account-account-requestPasswordReset) ).  \nThis method requires that the `appId` and `Origin` (or `Referer`) header comply with the [trusted app verification](#basics-trusted-apps-verification).",
          "params": {
            "properties": [
              {
                "key": "resetToken",
                "type": "string",
                "description": "The expiring reset token that was sent to the user after requesting the password reset."
              },
              {
                "key": "newPassword",
                "type": "string",
                "description": "The new password."
              },
              {
                "key": "appId",
                "type": "string",
                "description": "Your app's unique identifier."
              }
            ]
          },
          "result": {
            "http": "200 OK"
          },
          "examples": [
            {
              "params": {
                "resetToken": "chtplghfp0000hqjx814u6393",
                "newPassword": "Dr0ws$4p",
                "appId": "my-app-id"
              },
              "result": {}
            }
          ]
        }
      ]
    },
    {
      "id": "utils",
      "title": "Utils",
      "description": "Utility methods that don't pertain to a particular resource type.",
      "sections": [
        {
          "id": "getAccessInfo",
          "type": "method",
          "title": "Get current access info",
          "http": "GET /access-info",
          "description": "Retrieves information about the access in use.",
          "result": {
            "http": "200 OK",
            "description": "The current [Access properties](#data-structure-access), as well as:",
            "properties": [
              {
                "key": "calls",
                "type": "[key-value](#methods-key-value-)",
                "description": "A map of API methods and the number of time each of them was called using the current access."
              }
            ]
          },
          "examples": [
            {
              "params": {},
              "result": {
                "id": "ck862wm1i000achpvzddeyzlr",
                "token": "ck862wm1i000bchpv8qsvhjm0",
                "type": "app",
                "name": "Current access",
                "deviceName": "My awesome device",
                "permissions": [
                  {
                    "streamId": "health",
                    "level": "read"
                  }
                ],
                "lastUsed": 1585064918.454,
                "expires": 1585065098.454,
                "deleted": 1585065158.454,
                "clientData": {
                  "consent": "My custom consent message."
                },
                "created": 1585065098.454,
                "createdBy": "ck862wm1i0001chpveac1g3je",
                "modified": 1585065098.454,
                "modifiedBy": "ck862wm1i0001chpveac1g3je",
                "calls": {
                  "getAccessInfo": 12,
                  "profile:get": 5,
                  "events:get": 12,
                  "streams:get": 11,
                  "accesses:get": 6
                }
              }
            }
          ]
        },
        {
          "id": "callBatch",
          "type": "method",
          "title": "Call batch",
          "http": "POST /",
          "description": "Sends a batch of API methods calls in one go (e.g. for to syncing offline changes when resuming connectivity).",
          "params": {
            "description": "Array of method call objects, each defined as follows:",
            "properties": [
              {
                "key": "method",
                "type": "string",
                "description": "The method id."
              },
              {
                "key": "params",
                "type": "object or array",
                "description": "The call parameters as required by the method."
              }
            ]
          },
          "result": {
            "http": "200 OK",
            "properties": [
              {
                "key": "results",
                "type": "array of call results",
                "description": "The results of each method call, in order."
              }
            ]
          },
          "examples": [
            {
              "title": "Sync some health metrics",
              "params": [
                {
                  "method": "events.create",
                  "params": {
                    "time": 1385046854.282,
                    "streamId": "heart",
                    "type": "frequency/bpm",
                    "content": 90
                  }
                },
                {
                  "method": "events.create",
                  "params": {
                    "time": 1385046854.282,
                    "streamId": "systolic",
                    "type": "pressure/mmhg",
                    "content": 120
                  }
                },
                {
                  "method": "events.create",
                  "params": {
                    "time": 1385046854.282,
                    "streamId": "diastolic",
                    "type": "pressure/mmhg",
                    "content": 80
                  }
                }
              ],
              "result": {
                "results": [
                  {
                    "event": {
                      "id": "ck862wm21000schpvad9ol3xk",
                      "time": 1385046854.282,
                      "streamId": "heart",
                      "tags": [],
                      "type": "frequency/bpm",
                      "content": 90,
                      "created": 1585065218.473,
                      "createdBy": "ck862wm1i0001chpveac1g3je",
                      "modified": 1585065218.473,
                      "modifiedBy": "ck862wm1i0001chpveac1g3je"
                    }
                  },
                  {
                    "event": {
                      "id": "ck862wm21000tchpvhmt9hqno",
                      "time": 1385046854.282,
                      "streamId": "systolic",
                      "tags": [],
                      "type": "pressure/mmhg",
                      "content": 120,
                      "created": 1585065218.473,
                      "createdBy": "ck862wm1i0001chpveac1g3je",
                      "modified": 1585065218.473,
                      "modifiedBy": "ck862wm1i0001chpveac1g3je"
                    }
                  },
                  {
                    "event": {
                      "id": "ck862wm21000uchpvik4suc4z",
                      "time": 1385046854.282,
                      "streamId": "diastolic",
                      "tags": [],
                      "type": "pressure/mmhg",
                      "content": 80,
                      "created": 1585065218.473,
                      "createdBy": "ck862wm1i0001chpveac1g3je",
                      "modified": 1585065218.473,
                      "modifiedBy": "ck862wm1i0001chpveac1g3je"
                    }
                  }
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}